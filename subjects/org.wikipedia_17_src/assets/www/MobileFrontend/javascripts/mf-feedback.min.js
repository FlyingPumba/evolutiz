MobileFrontend.feedback=(function(){var a=MobileFrontend.utils,b=document.getElementById("mf-feedback-form");a(b).bind("submit",function(o){o.preventDefault();var k,g,d,c,e,m={},n,f,h={},l=[];n=[].concat(b.getElementsByTagName("select")).concat(b.getElementsByTagName("textarea")).concat(b.getElementsByTagName("input"));for(k=0;k<n.length;k++){f=n[k];for(g=0;g<f.length;g++){l.push(f[g])}}for(k=0;k<l.length;k++){d=l[k];c=d.getAttribute("name");e=d.value;if(c){h[c]=e;m[c]=d}}function p(i,s,r,u,t){var q=document.createElement("div"),j=document.createTextNode(s);u=u||"mf-feedback-message";q.setAttribute("id",u);a(q).addClass("message");if(r){a(q).addClass("error")}q.appendChild(j);i.insertBefore(q,t||i.firstChild);window.location.hash="#"+u;return q}a.ajax({type:"post",url:b.getAttribute("action"),data:h,success:function(i){b.innerHTML="";p(b,i)},error:function(u,j,w){var s,r,q,v,t;if(JSON){w=JSON.parse(w);for(s=1;s<w.length;s++){r=w[s][0];q=w[s][1];if(m[r]){v="mf-feedback-message-"+r;t=document.getElementById(v);a(t).remove();a(m[r]).addClass("error");p(b,q,true,v,m[r])}}t=document.getElementById("mf-feedback-message");a(t).remove();p(b,w[0],true)}}})})}());