MobileFrontend.toggle=(function(){var b=MobileFrontend.utils,a=MobileFrontend.message("expand-section"),e=MobileFrontend.message("collapse-section");function f(){var j,p,s,k,h=[],m,n="/api.php",o=[];k=document.getElementsByTagName("H2");for(j=0;j<k.length;j++){s=k[j];if(b(s).hasClass("section_heading")){o.push(s);m=s.getElementsByTagName("button");for(p=0;p<m.length;p++){h.push(m[p])}}}window.wm_toggle_section=c;for(j=0;j<h.length;j++){b(h[j]).remove()}function l(){var i=this.id?this.id.split("_")[1]:-1;if(i!==-1){c(i)}}function q(){var i=document.createElement("button");b(i).text(a);return i}for(j=0;j<o.length;j++){s=o[j];s.removeAttribute("onclick");s.insertBefore(q(),s.firstChild);b(s).bind("click",l)}function r(){var i=window.location.hash;if(i.indexOf("#")===0){g(i)}if(i){window.location.hash="#_";window.location.hash=i}}r();for(p=document.getElementsByTagName("a"),j=0;j<p.length;j++){b(p[j]).bind("click",r)}}function g(k){var i=document.getElementById(k.substr(1)),j,h;if(i){j=i;while(j&&!b(j).hasClass("content_block")&&!b(j).hasClass("section_heading")){j=j.parentNode}if(j&&!b(j).hasClass("openSection")){h=j.id.split("_")[1];c(h)}}}function c(p){var o=document.getElementById("section_"+p),h,n=o.getElementsByTagName("button")[0],j,q,m,l,k=[];if(b(o).hasClass("openSection")){b(o).removeClass("togglefix");b(o).removeClass("openSection");b(n).removeClass("openSection");b(n).text(a);l=true}else{k.push(o);b(o).addClass("openSection");b(n).addClass("openSection");b(n).text(e)}for(j=0,d=["content_","anchor_"];j<=1;j++){m=document.getElementById(d[j]+p);if(m&&b(m).hasClass("openSection")){b(m).removeClass("togglefix");b(m).removeClass("openSection")}else{if(m){k.push(m);b(m).addClass("openSection")}}}h="section_"+p;m=document.getElementById(h);m.removeAttribute("id");window.location.hash=l?"#_":"#"+h;m.setAttribute("id",h);window.setTimeout(function(){var r;for(r=0;r<k.length;r++){b(k[r]).addClass("togglefix")}},400)}MobileFrontend.registerModule("toggle");return{wm_reveal_for_hash:g,wm_toggle_section:c,init:f}}());