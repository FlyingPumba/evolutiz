if(typeof jQuery!=="undefined"){MobileFrontend.references=(function(g){var d=function(){},c;function f(){var i={};g("ol.references li").each(function(j,k){i[g(k).attr("id")]={html:g(k).html()}});return i}function a(){var i=navigator.userAgent;return i.match(/AppleWebKit\/(53[4-9]|5[4-9]\d?|[6-9])\d?\d?/)?true:false}if(!a()){d=function(){var i=g("#mf-references").outerHeight();g("#mf-references").css({top:(window.innerHeight+window.pageYOffset)-i,bottom:"auto",position:"absolute"})};g(document).scroll(d)}function b(i){var j;i=i||{};if(!i.animationSpeed){j=window.location.hash.substr(1).match(/refspeed:([0-9]*)/);i.animationSpeed=j?parseInt(j[1],10):500}if(!i.animation){j=window.location.hash.substr(1).match(/refanimation:([a-z]*)/);i.animation=j?j[1]:null}return i}function e(){var i=window.innerHeight?window.innerHeight:g(window).height();return i+g(window).scrollTop()}function h(j,p,t){var k,s,o,m,n,i,r=f();t=b(t);j=j||g("#content")[0];p=typeof(p)==="undefined"?true:p;g("#mf-references").remove();k=g('<div id="mf-references"><div></div></div>').hide().appendTo(document.body)[0];function l(u){u.stopPropagation()}k.ontouchstart=l;s=function(){if(!g("#mf-references").is(":visible")){return}var u;o=null;if(t.animation==="none"){g("#mf-references").hide()}else{if(t.animation==="fade"){g("#mf-references").fadeOut(t.animationSpeed)}else{u=e();if(!a()){g("#mf-references").show().animate({top:u},{duration:t.animationSpeed,complete:function(){g("#mf-references").hide()}})}else{g("#mf-references").slideUp()}}}};g("<button>close</button>").click(s).appendTo("#mf-references");g(".mw-cite-backlink a").click(s);function q(u){var w,v;i=g(this).attr("href");m=i&&i.charAt(0)==="#"?r[i.substr(1,i.length)]:null;if(!g("#mf-references").is(":visible")||o!==i){o=i;if(m){n="<h3>"+g(this).text()+"</h3>"+m.html}else{n=g("<a />").text(g(this).text()).attr("href",i).appendTo("<div />").parent().html()}g("#mf-references div").html(n);g("#mf-references div sup a").click(q);d();if(t.animation==="none"){g("#mf-references").show()}else{if(t.animation==="fade"){g("#mf-references").fadeIn(t.animationSpeed)}else{if(!a()){w=e();v=g("#mf-references").outerHeight();g("#mf-references").show().css({top:w}).animate({top:w-v},t.animationSpeed)}else{g("#mf-references").slideDown()}}}}else{s()}if(t.onClickReference){t.onClickReference(u)}u.preventDefault();l(u)}g("sup a",j).unbind("click").click(q).each(function(u,v){v.ontouchstart=l});if(p){g(window).scroll(function(u){s()});g(document.body).bind("click",s);g(document.body).bind("touchstart",function(){g("#mf-references").hide()})}}MobileFrontend.registerModule("references");return{init:h}}(jQuery))};